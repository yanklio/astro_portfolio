---
import Logo from "../Logo.astro";
import Navigation from "./Navigation.astro";
import RSSButton from "./RSSButton.astro";
import ThemeIcon from "./ThemeIcon.astro";
import { Icon } from "astro-icon/components";
---

<header>
    <nav>
        <Logo />
        <div class="desktop-only">
            <Navigation />
        </div>

        <div class="desktop-only">
            <div class="single-row">
                <RSSButton />
                <ThemeIcon />
            </div>
        </div>

        <div class="mobile-only">
            <button
                id="mobileMenuToggle"
                class="mobile-menu-btn paper-button"
                aria-label="Toggle menu"
            >
                <Icon name="ic:menu" />
            </button>
        </div>
    </nav>
</header>

<style>
    nav {
        min-height: 82px;

        background-color: var(--bg_soft);
        position: sticky;
        top: 0;
        border-bottom: 4px solid var(--fg2);
        width: 100%;
        z-index: 10;

        padding: 2px 16px;

        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .single-row {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .mobile-menu-btn {
        height: 50px;
        padding: 0 16px;
        font-size: 1.5rem;
        background: var(--bg1);

        display: flex;
        justify-content: center;
        align-items: center;
    }
</style>

<script>
    const mobileMenu = document.getElementById("mobileMenu");
    const mobileMenuToggle = document.getElementById("mobileMenuToggle");

    mobileMenuToggle?.addEventListener("click", () => {
        mobileMenu?.classList.toggle("open");
    });

    document.addEventListener("click", (e) => {
        if (mobileMenuToggle && mobileMenu) {
            const target = e.target as Node;
            if (
                !mobileMenu.contains(target) &&
                !mobileMenuToggle.contains(target)
            ) {
                mobileMenu.classList.remove("open");
            }
        }
    });
</script>
